{% extends "templates/web.html" %}

{% block page_content %}
<h2>All Flights</h2>

<ul style="list-style-type:none; padding:0;">
    {% for doc in flights %}
        <li style="margin-bottom:20px; border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
    <strong>
        {% set airplane_doc = frappe.get_doc("Airplane", doc.airplane) %}
        {{ airplane_doc.airline or doc.airplane }}
    </strong><br>
    
    <div style="margin: 10px 0;">
        <span style="font-size: 16px; color: #333;">
            {{ doc.source_airport_code }} â†’ {{ doc.destination_airport_code }}
        </span>
    </div>
    
    <div style="color: #666; margin: 5px 0;">
        Date: {{ frappe.utils.format_date(doc.date_of_departure, "d MMMM, YYYY") }} | 
        Time: {{ doc.time_of_departure }} | 
        Duration: {{ frappe.utils.format_duration(doc.duration) if doc.duration else doc.duration }}
    </div>
    
    {% if doc.price %}
        <div style="color: #2e7d32; font-weight: bold; margin: 10px 0;">
            Price: {{ frappe.format_value(doc.price, {"fieldtype": "Currency"}) }}
        </div>
    {% endif %}
    
    <a href="{{ doc.route }}" class="btn btn-primary" style="display: inline-block; margin-top: 10px; padding: 8px 16px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px;">
        View Flight
    </a>
</li>
    {% endfor %}
</ul>
{% endblock %}
